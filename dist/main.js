!function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class r{init(){this._items=this._items||[],this._prefixLog="asynca : ",this._history=[],this._itemIdxToCacheIdx=[]}async _manageCache(e){let t,i,r,s;if(this._history.length>=this._cache.length){let h=this.unallocStrategie(e);t=this._history[h].itemIdx,i=this._history[h].cacheIdx,console.log(this._prefixLog,` get cacheIdx to recycle : ${i}  => free item : ${t}`),this._cache[i]=void 0,this._itemIdxToCacheIdx[t]=void 0,this._history.splice(h,1),s=this.free(t),r=i}else r=this._history.length;return this._history.push({itemIdx:e,cacheIdx:r}),this._cache[r]=this._items[e],this._itemIdxToCacheIdx[e]=r,console.log(this._prefixLog,` use cacheIdx : ${r}  => alloc item : ${e}`),s?s.then(()=>void 0!==this._itemIdxToCacheIdx[e]?this.alloc(e):null):this.alloc(e)}unallocStrategie(e){console.assert(!1,"This method must be overriden")}alloc(e){console.assert(!1,"This method must be overriden")}free(e){console.assert(!1,"This method must be overriden")}getAsync(e){return void 0===this._itemIdxToCacheIdx[e]?(console.log(this._prefixLog,"item("+e+") not cached => compute it"),this._manageCache(e)):(console.log(this._prefixLog,"item("+e+") already in cache => get it"),Promise.resolve(this._items[e]))}get(e){return this.getAsync(e),this._items[e]}push(e){return console.assert(this._items,"items is not initialised"),this._items.push(e),this}forEach(e){return this._items.forEach(e),this}map(e){return this._items.map(e)}reduce(e){return this._items.reduce(e)}cache(e){return e="number"==typeof e?new Array(e):e,this._manageSetGet("_cache",e)}items(e){return this._manageSetGet("_items",e)}_manageSetGet(e,t){return void 0===t?this[e]:(this[e]=t,this.init(),this)}}class s extends r{unallocStrategie(e){return 0}}class h extends s{getSignedMinDistance(e,t,i,r=!1){let s=t-e;if(r)if(s>0){if(i-s<s)return-(i-s)}else if(i+s<-s)return i+s;return s}prefetchingOff(){this._prefetchingOn=!1}prefetchingOn(){this._prefetchingOn=!0}}i.d(t,"Abstract",function(){return n}),i.d(t,"FifoCache",function(){return o}),i.d(t,"SidePrefetch",function(){return c});const n=r,o=s,c=class extends h{init(){super.init(),this._cyclic=this._cyclic||!1,this._rightPrefetchSize=void 0!==this._rightPrefetchSize?this._rightPrefetchSize:this._leftPrefetchSize,this._sidePrefetchOffOnce=!1,this._prefetchingOn=!0}unallocStrategie(e){let t=this._items.length;for(let e=0;e<this._history.length;e++){let i=this.getSignedMinDistance(this._curItemIdx,this._history[e].itemIdx,t,this._cyclic);if(i>this._rightPrefetchSize||0-i>this._leftPrefetchSize)return e}return super.unallocStrategie(e)}get(e){this._curItemIdx=e,console.group(this._prefixLog,"Get current : ",e);let t=super.get(e);if(this._prefetchingOn){for(let t=e-this._leftPrefetchSize;t<=e-1;t++)if(t<0){if(this._cyclic){let e=this.items.length+t;console.log(this._prefixLog,"/////////////////"),console.log(this._prefixLog,"Prefetch left : ",e),super.get(e)}}else console.log(this._prefixLog,"/////////////////"),console.log(this._prefixLog,"Prefetch left : ",t),super.get(t);for(let t=e+1,i=0;i<this._rightPrefetchSize;t++,i++)if(t>=this.items.length){if(this._cyclic){let e=t-this.items.length;console.log(this._prefixLog,"/////////////////"),console.log(this._prefixLog,"Prefetch right :",e),super.get(e)}}else console.log(this._prefixLog,"/////////////////"),console.log(this._prefixLog,"Prefetch right :",t),super.get(t)}return console.groupEnd(),t}prefetchSideSize(e){return this._manageSetGet("_leftPrefetchSize",e)}leftPrefetchSideSize(e){return this._manageSetGet("_leftPrefetchSize",e)}rightPrefetchSideSize(e){return this._manageSetGet("_rightPrefetchSize",e)}}}]);