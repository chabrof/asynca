{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./samples/combiSample.js","webpack:///./src/Abstract.js","webpack:///./src/FifoCache.js","webpack:///./src/SidePrefetch.js","webpack:///./src/SidePrefetchAbstract.js"],"names":["containerDomElt","cacheViewDomElt","nbLines","nbColumns","divItems","_createItem","idx","item","document","createElement","setAttribute","style","backgroundColor","addEventListener","mouseOverItem","innerHTML","columns","lines","idxV","curLine","idxH","console","log","push","nbSimulatedRessources","simulatedRessources","cache","Array","TestSidePrefeth","alloc","itemIdx","divItem","toBeComputed","length","shift","upperResolve","promise","Promise","resolve","reject","info","window","setTimeout","free","async","asyncaTest","e","domElem","target","getAttribute","parentNode","itemIdxToGet","get","_displayCache","reduce","acc","concat","_add3Items","ct","nbItems","idxToAdd","appendChild","init","getElementById","forEach","Abstract","constructor","_items","_prefixLog","_history","_itemIdxToCacheIdx","_prefetching","_manageCache","oldItemIdx","oldCacheIdx","cacheIdx","unallocPromise","_cache","historyIdx","unallocStrategie","_curItemIdx","undefined","splice","_free","then","_alloc","curItemIdx","curItem","allocItemIdx","allocItem","assert","getAsync","_getAsync","_get","value","cbk","map","_manageSetGet","items","prefetching","attrib","FifoCache","curItems","SidePrefetch","_init","_cyclic","_leftPrefetchSideSize","_sidePrefetchOffOnce","warn","distance","getSignedMinDistance","_rightPrefetchSideSize","group","ret","tmpItemIdx","modTmpItemIdx","groupEnd","prefetchSideSize","leftPrefetchSideSize","rightPrefetchSideSize","cyclic","SidePrefetchAbstract","itemOrigIdx","itemDestIdx"],"mappings":"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","file":"combiSample.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./samples/combiSample.js\");\n","import { SidePrefetch } from \"../src/SidePrefetch\"\n\nlet containerDomElt // the container div\nlet cacheViewDomElt // this div to view the cache in action\nlet nbLines = 10\nlet nbColumns = 10\nlet divItems = [] // the items intended to be displayed in the container\n\nfunction _createItem (idx) {\n  let item = document.createElement('div')\n  item.setAttribute('id', `div_${idx}`)\n  item.setAttribute('class', `item`)\n  item.setAttribute('data-idx', idx)\n  item.style.backgroundColor = \"darkGrey\"\n  item.addEventListener('mouseover', mouseOverItem)\n  item.innerHTML = `item <b>${idx}<br/>:|</b>`\n  return item\n}\n\nlet columns = []\nlet lines = []\n\nfor (let idxV = 0; idxV < nbLines; idxV++) {\n  let curLine = []\n  for (let idxH = 0; idxH < nbColumns; idxH++) {\n    columns[idxH] = columns[idxH] || []\n    let item = _createItem(idxH + ',' + idxV)\n    console.log('item', item)\n    curLine.push(item)\n    columns[idxH].push(item)\n  }\n  lines.push(curLine)\n}\n\nconsole.log('columns', columns)\nconsole.log('lines', lines)\n\nlet nbSimulatedRessources = 4\nlet simulatedRessources = []\nlet cache = new Array(nbSimulatedRessources) // Cache with 5 free spaces (5 ressources of computing)\n\n/**\n * Create our implementation of SidePrefetch class\n */\nclass TestSidePrefeth extends SidePrefetch {\n\n  alloc (itemIdx) {\n    let divItem = divItems[itemIdx]\n    divItem.toBeComputed = true\n    if (simulatedRessources.length > nbSimulatedRessources - 1) {\n      simulatedRessources.shift()\n    }\n    let upperResolve\n\n    let promise = new Promise((resolve, reject) => { upperResolve = resolve })\n    console.info(`Alloc called for ${itemIdx}`, divItem)\n    simulatedRessources.push(window.setTimeout(\n      () => {\n        if (!divItem.toBeComputed) return upperResolve() // ==>\n\n        divItem.style.backgroundColor = \"darkGreen\"\n        divItem.innerHTML = `item <b>${itemIdx}<br>:)</b>`\n        console.info(`Alloc Finished ! : ${itemIdx}`)\n        upperResolve()\n      }, 300))\n    return promise\n  }\n\n  free (itemIdx) {\n    let divItem = divItems[itemIdx]\n    divItem.toBeComputed = false\n    console.info(`Free called for ${itemIdx}`)\n    let async =\n      (resolve, reject) => {\n        window.setTimeout(\n          () => {\n            if (divItem.toBeComputed) return resolve()// ==>\n            console.info(`Free Finished ! : ${itemIdx}`)\n            divItem.style.backgroundColor = \"darkRed\"\n            divItem.innerHTML = `item <b>${itemIdx}<br/>:(</b>`\n            resolve()\n          }, 100)\n      }\n    return new Promise(async)\n  }\n}\n\nlet asyncaTest = new TestSidePrefeth(divItems, cache, 1, 2) // AsyncaTest class instance\n\n\nfunction mouseOverItem (e) {\n  let domElem = e.target\n  while (domElem.getAttribute('data-idx') === null) {\n    domElem = domElem.parentNode\n  }\n  let itemIdxToGet = domElem.getAttribute('data-idx') * 1\n  asyncaTest.get(itemIdxToGet)\n  _displayCache()\n}\n\n\nfunction _displayCache () {\n  cacheViewDomElt.innerHTML = cache.reduce((acc, divItem) => acc.concat((divItem ? divItem.getAttribute('data-idx') : '--') + ' '), 'Items in cache : ')\n}\n\nfunction _add3Items () {\n  for (let ct = 0; ct < 3; ct++) {\n    nbItems++\n    let idxToAdd = nbItems - 1\n    let item = _createItem(idxToAdd)\n    divItems.push(item)\n    containerDomElt.appendChild(asyncaTest.get(idxToAdd))\n  }\n}\n\nfunction init () {\n  containerDomElt = document.getElementById('container')\n  cacheViewDomElt = document.getElementById('cacheView')\n\n  document.getElementById('btnAdd').addEventListener('click', _add3Items)\n\n  divItems.forEach((item, idx) => containerDomElt.appendChild(asyncaTest.get(idx)))\n}\n\nwindow.addEventListener('load', init)\n","export class Abstract {\n\n  constructor () {\n    this.init()\n  }\n\n  init () {\n    this._items = this._items || []\n    this._prefixLog = \"asynca : \"\n\n    this._history = []\n    this._itemIdxToCacheIdx = []\n    this._prefetching = true\n  }\n\n  /**\n   * meta method\n   * use a Fifo unallocStrategy\n   * [itemIdx] is the index of the iten in the items array\n   */\n  async _manageCache (itemIdx) {\n    let oldItemIdx\n    let oldCacheIdx\n    let cacheIdx\n    let unallocPromise\n\n    if (this._history.length >= this._cache.length) {\n      //\n      // No more space in cache => unalloc one elem\n      //\n\n      // search in history withe uallocStrategie\n      let historyIdx = this.unallocStrategie(this._curItemIdx, this._items[this._curItemIdx], itemIdx, this._items[itemIdx])\n      oldItemIdx = this._history[historyIdx].itemIdx\n      oldCacheIdx = this._history[historyIdx].cacheIdx\n\n      // unalloc the \"good cache elt\"\n      console.log(this._prefixLog, ` get cacheIdx to recycle : ${oldCacheIdx}  => free item : ${oldItemIdx}`)\n      this._cache[oldCacheIdx] = undefined\n      this._itemIdxToCacheIdx[oldItemIdx] = undefined\n      this._history.splice(historyIdx, 1)\n      unallocPromise = this._free(oldItemIdx, this._items[oldItemIdx])\n\n      // use the old cache idx as a new one for new item caching\n      cacheIdx = oldCacheIdx\n    } else {\n      // get the cache Idx (the history tab is not full for the moment historyIdx and cacheIdx are the same)\n      cacheIdx = this._history.length // == historyIdx\n    }\n\n    // Put in cache\n    this._history.push({\"itemIdx\" : itemIdx, \"cacheIdx\" : cacheIdx})\n    const item = this._items[itemIdx]\n    this._cache[cacheIdx] = item\n    this._itemIdxToCacheIdx[itemIdx] = cacheIdx\n    console.log(this._prefixLog, ` use cacheIdx : ${cacheIdx}  => alloc item : ${itemIdx}`)\n    return unallocPromise ? unallocPromise.then(() => this._itemIdxToCacheIdx[itemIdx] !== undefined ? this._alloc(itemIdx, item) : null) : this._alloc(itemIdx, item)\n  }\n\n  /**\n   * Defines the strategy for unallocate item in cache\n   * [curItemIdx] the index of the current item (that is wished by user)\n   * [curItem] The item which is whished by user\n   * [allocItemIdx] the index of the item which will be allocated now (and which needs an unalloc process to free a space for its future allocation)\n   * [allocItem] the item which will be allocated now (and which needs an unalloc process to free a space for its future allocation)\n   * @return {number} index in the [_history]\n   */\n  unallocStrategie (curItemIdx, curItem, allocItemIdx, allocItem) {\n    console.assert(false, 'This method must be overriden')\n  }\n\n  /**\n   * @abstract\n   * [itemIdx] is the index in the list of items which must be computed\n   */\n  _alloc (itemIdx, item) {\n    console.assert(false, \"This method must be overriden : you must call the 'alloc' setter/getter\")\n  }\n\n  /**\n   * @abstract\n   * [itemIdx] is the index in the list of items which must be free (un-computed)\n   */\n  _free (itemIdx, item) {\n    console.assert(false, \"This method must be overriden : you must call the 'free' setter/getter\")\n  }\n\n  /**\n   * Get a Promise to the wished item\n   * it uses precomputed item in cache (if available) or ask for a computation\n   */\n  getAsync (itemIdx) {\n    this._curItemIdx = itemIdx\n    return this._getAsync(itemIdx)\n  }\n\n  _getAsync (itemIdx) {\n    if (this._itemIdxToCacheIdx[itemIdx] === undefined) {\n      console.log(this._prefixLog, 'item(' + itemIdx + ') not cached => compute it')\n      return this._manageCache(itemIdx)\n    } else {\n      console.log(this._prefixLog, 'item(' + itemIdx + ') already in cache => get it')\n      return Promise.resolve(this._items[itemIdx])\n    }\n  }\n\n  /**\n   * Get Item which has been computed or .. not !\n   * uses precomputed item in cache (if available) or ask for a computation\n   */\n  get (itemIdx) {\n    this._curItemIdx = itemIdx\n    return this._get(itemIdx)\n  }\n\n  _get (itemIdx) {\n    // First of all, call the whole machinery\n    this._getAsync(itemIdx)\n    // ... and simply return the item\n    return this._items[itemIdx]\n  }\n\n  /**\n   * Push one item in list of items\n   */\n  push (value) {\n    console.assert(this._items, 'items is not initialised')\n\n    this._items.push(value)\n    return this\n  }\n\n  forEach (cbk) {\n    this._items.forEach(cbk)\n    return this\n  }\n\n  map (cbk) {\n    return this._items.map(cbk)\n  }\n\n  reduce (cbk) {\n    return this._items.reduce(cbk)\n  }\n\n  //\n  // Getters/Setters\n  //\n\n  cache (value = undefined) {\n    value = typeof value === 'number' ? new Array(value) : value\n    return this._manageSetGet('_cache', value)\n  }\n\n  items (value = undefined) {\n    if (value === undefined) return this._items\n\n    // pre\n    console.assert(value && value.length, 'items must be an array')\n\n    value.forEach((item) => this.push(item))\n\n    return this\n  }\n\n  alloc (value) {\n    return this._manageSetGet('_alloc', value)\n  }\n\n  free (value) {\n    return this._manageSetGet('_free', value)\n  }\n\n  prefetching (value) {\n    return this._manageSetGet('_prefetching', value)\n  }\n\n  _manageSetGet (attrib, value) {\n    if (value === undefined) return this[attrib]\n\n    this[attrib] = value\n\n    this.init()\n\n    return this\n  }\n}\n","import { Abstract } from \"./Abstract\"\n\nexport class FifoCache extends Abstract {\n\n  /**\n   * Defines the strategy for unallocate item in cache\n   * We implement a very very hard to understand complex strategy\n   *   => we choose to unallocate the oldest computed item (first item idx in the history : 0)\n   * [itemIdx] is the index of the item\n   * @return {number} index in the [_history]\n   */\n  unallocStrategie (curItems, allocItemIdx) {\n    return 0\n  }\n}\n","import { SidePrefetchAbstract } from \"./SidePrefetchAbstract\"\n\nexport class SidePrefetch extends SidePrefetchAbstract {\n\n  _init () {\n    super._init()\n\n    this._cyclic = this._cyclic || false\n    this._leftPrefetchSideSize = (this._leftPrefetchSideSize !== undefined ? this._leftPrefetchSideSize : this._leftPrefetchSideSize)\n    this._sidePrefetchOffOnce = false\n  }\n\n  /**\n   * See meta method for documentation\n   */\n  unallocStrategie (curItemIdx, curItem, allocItemIdx, allocItem) {\n    console.warn('itemIdx', allocItemIdx, 'curItemIdx', curItemIdx)\n\n    let nbItems = this._items.length\n    //  We do NOT use the arg [itemIdx] but _curItemIdx (which represents the \"wished\" item and not the right or left precomputed items)\n    for (let ct = 0; ct < this._history.length; ct++) {\n      let distance = this.getSignedMinDistance(curItemIdx, this._history[ct].itemIdx, nbItems, this._cyclic)\n\n      if (distance > this._rightPrefetchSideSize ||\n         (0 - distance) > this._leftPrefetchSideSize) {\n        return ct\n      }\n    }\n\n    // By default, we use the FifoCache method, wich unallocate the \"oldest\" cached item\n    return super.unallocStrategie(curItemIdx, curItem, allocItemIdx, allocItem)\n  }\n\n  /**\n   * See meta method for documentation\n   */\n  _get (itemIdx) {\n    // Current item\n    console.group(this._prefixLog, 'Get current : ', itemIdx)\n\n    let ret = super._get(itemIdx)\n\n    // Prefetch\n    console.log('Prefetching :', this._prefetching)\n    if (this._prefetching) {\n      // Left items\n      for (let tmpItemIdx = itemIdx - this._leftPrefetchSideSize; tmpItemIdx <= itemIdx - 1; tmpItemIdx++) {\n        if (tmpItemIdx < 0) {\n          if (this._cyclic) {\n            let modTmpItemIdx = this._items.length + tmpItemIdx\n            console.log(this._prefixLog, '/////////////////')\n            console.log(this._prefixLog, 'Prefetch left : ', modTmpItemIdx)\n            super._get(modTmpItemIdx)\n          }\n        } else {\n          console.log(this._prefixLog, '/////////////////')\n          console.log(this._prefixLog, 'Prefetch left : ', tmpItemIdx)\n          super._get(tmpItemIdx)\n        }\n      }\n      // Right items\n      console.log('right : ', this._rightPrefetchSideSize)\n      for (let tmpItemIdx = itemIdx + 1, ct = 0; ct < this._rightPrefetchSideSize; tmpItemIdx++, ct++) {\n        if (tmpItemIdx >= this._items.length) {\n          if (this._cyclic) {\n            let modTmpItemIdx = tmpItemIdx - this._items.length\n            console.log(this._prefixLog, '/////////////////')\n            console.log(this._prefixLog, 'Prefetch right :', modTmpItemIdx)\n            super._get(modTmpItemIdx)\n          }\n        } else {\n          console.log(this._prefixLog, '/////////////////')\n          console.log(this._prefixLog, 'Prefetch right :', tmpItemIdx)\n          super._get(tmpItemIdx)\n        }\n      }\n    }\n    console.groupEnd()\n\n    return ret\n  }\n\n  prefetchSideSize (value) {\n    return this._manageSetGet('_leftPrefetchSideSize', value)\n  }\n\n  leftPrefetchSideSize (value) {\n    return this._manageSetGet('_leftPrefetchSideSize', value)\n  }\n\n  rightPrefetchSideSize (value) {\n    return this._manageSetGet('_rightPrefetchSideSize', value)\n  }\n\n  cyclic (value) {\n    return this._manageSetGet('_cyclic', value)\n  }\n}\n","import { FifoCache } from \"./FifoCache\"\n\nexport class SidePrefetchAbstract extends FifoCache {\n\n  /**\n   * Get distance between items\n   * distance > 0 distance to the right\n   * distance < 0 distance to the left\n   */\n  getSignedMinDistance (itemOrigIdx, itemDestIdx, nbItems, cyclic = false) {\n    let distance = itemDestIdx - itemOrigIdx\n\n    if (cyclic) {\n      if (distance > 0) {\n        // We found a \"left distance\" ..accross 0 index\n        if (nbItems - distance < distance) return -(nbItems - distance)\n      } else {\n        // We found a \"right distance\" ..accross last index\n        if ((nbItems + distance) < -distance) return (nbItems + distance)\n      }\n    }\n\n    return distance\n  }\n}\n"],"sourceRoot":""}